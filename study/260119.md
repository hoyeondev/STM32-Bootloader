
# 링커 스크립트 자체 섹션 다루기

기본 섹션(.text, .data, .bss)만으로는 임베디드 시스템의 특수한 요구사항을 충족하기 어렵다.<br>
자체 섹션을 만들면 코드와 데이터를 원하는 메모리 위치에 정확하게 배치할 수 있다.

---

### 자체 섹션을 만드는 이유
1. 메모리 영역 분리 : 부트로더/앱, EEPROM 등
2. 성능 최적화 : 고속 메모리(CCM), RAM 실행
3. 하드웨어 요구사항 : DMA 정렬, 벡터 테이블 위치
4. 데이터 관리 : 초기화 제어, 고정 주소 배치
5. 시스템 안정성 : 펌웨어 메타데이터, 공유 메모리

### 부트로더와 애플리케이션 분리 예제
목적: Flash를 여러 영역으로 나누어 부트로더와 앱을 독립적으로 관리

```ld
MEMORY {
    FLASH_BOOT (rx) : ORIGIN = 0x08000000, LENGTH = 32K
    FLASH_APP (rx)  : ORIGIN = 0x08008000, LENGTH = 480K
}

SECTIONS {
    .bootloader : { *(.text.bootloader) } > FLASH_BOOT
    .application : { *(.text.application) } > FLASH_APP
}
```
```c
__attribute__((section(".text.bootloader")))
void bootloader_main(void) { /* ... */ }
```

<img width="637" height="285" alt="image" src="https://github.com/user-attachments/assets/19076544-1722-473f-b309-0e1aee5a3344" />
